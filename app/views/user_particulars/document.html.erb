<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Upload</title>
    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .file-upload-wrapper {
            position: relative;
            width: 100%;
            height: auto;
            border: 2px dashed #d6d6d6;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            padding: 20px;
            margin-bottom: 20px;
        }

        .file-upload-wrapper input[type="file"] {
            display: none;
        }

        .file-upload-wrapper span {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .file-upload-wrapper button {
            margin-top: 10px;
        }

        .uploaded-files-list {
            width: 100%;
            margin-top: 20px;
        }

        .uploaded-file-item {
            display: flex;
            flex-direction: column;
            border: 1px solid #d6d6d6;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            background-color: #f9f9f9;
        }

        .file-name {
            font-weight: bold;
        }

        .file-details {
            display: flex;
            flex-wrap: wrap;
            margin-top: 5px;
        }

        .file-details span {
            margin-right: 15px;
        }

        .file-details select,
        .file-details textarea {
            margin-top: 5px;
        }

        .file-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .delete-button,
        .preview-button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }

        .delete-button {
            color: red;
        }

        .preview-button {
            color: blue;
        }
    </style>
</head>

<body>
    <div class="container mt-5">
        <div class="alert alert-info text-center" role="alert">
            <h5 class="alert-heading">Guide</h5>
            <p>To upload your documents, please follow these steps:</p>
            <ol>
                <li>Drag and drop your documents into the designated area or click to select files.</li>
                <li>Once all documents are uploaded, they will appear in the 'Uploaded Documents' section.</li>
                <li>You can delete the uploaded documents from the list.</li>
            </ol>
        </div>
        <div class="file-upload-wrapper">
            <span>Drag and drop your documents below. Supported formats: PDF, DOCX, JPG. Max size: 5MB.</span>
            <button type="button" class="btn btn-primary" id="selectDocumentButton">Browse...</button>
            <input type="file" id="fileInput" multiple>
        </div>

        <div class="uploaded-files-list" id="uploadedFilesList">
            <!-- Uploaded files will appear here -->
        </div>
    </div>

    <!-- jQuery, Popper.js, and Bootstrap JS for Bootstrap functionality -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <script>
        let selectedFiles = [];

        document.getElementById('selectDocumentButton').addEventListener('click', function () {
            document.getElementById('fileInput').click();
        });

        document.getElementById('fileInput').addEventListener('change', function (event) {
            const files = Array.from(event.target.files);
            handleFiles(files);
        });

        function handleFiles(files) {
            files.forEach(file => {
                if (!['application/pdf', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'image/jpeg'].includes(file.type)) {
                    alert('Unsupported file type. Please upload a PDF, DOCX, or JPG file.');
                } else if (file.size > 5242880) { // 5MB limit
                    alert('File size exceeds the maximum limit of 5MB. Please upload a smaller file.');
                } else {
                    selectedFiles.push(file);
                    addUploadedFilesToList([file]);
                }
            });
        }

        function addUploadedFilesToList(files) {
            const uploadedFilesList = document.getElementById('uploadedFilesList');
            files.forEach(file => {
                const listItem = document.createElement('div');
                listItem.classList.add('uploaded-file-item');
                listItem.innerHTML = `
                    <span class="file-name">${file.name}</span>
                    <div class="file-details">
                        <span class="file-size">Size: ${(file.size / 1024).toFixed(2)} KB</span>
                        <span class="file-date">Date: ${new Date().toLocaleDateString()}</span>
                        <span class="file-status">Status: Unverified</span>
                        <select class="form-control dropdown">
                            <option value="education">Education</option>
                            <option value="medical">Medical</option>
                            <option value="personal documents">Personal Documents</option>
                            <option value="property">Property</option>
                        </select>
                        <textarea class="form-control description-container" placeholder="Enter Description..."></textarea>
                    </div>
                    <div class="file-actions">
                        <button class="preview-button" onclick="previewFile('${URL.createObjectURL(file)}')">Preview</button>
                        <button class="delete-button" onclick="deleteFile('${file.name}')">Delete</button>
                    </div>
                `;
                uploadedFilesList.appendChild(listItem);
            });
        }

        function deleteFile(fileName) {
            selectedFiles = selectedFiles.filter(file => file.name !== fileName);
            const uploadedFilesList = document.getElementById('uploadedFilesList');
            const fileItems = Array.from(uploadedFilesList.children);
            fileItems.forEach(item => {
                if (item.querySelector('.file-name').textContent === fileName) {
                    uploadedFilesList.removeChild(item);
                }
            });
        }

        function previewFile(fileUrl) {
            window.open(fileUrl, '_blank');
        }
    </script>
</body>

</html>
